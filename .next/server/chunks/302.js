"use strict";exports.id=302,exports.ids=[302],exports.modules={302:(e,t,r)=>{r.d(t,{parseFactorsTable1:()=>i});var l=r(917);function s(e){if(!e)return null;let t=e.replace(/[\u00a0\s,]/g,"").trim();if(!t)return null;let r=t.match(/^([+-])?/),l=r&&"-"===r[1]?-1:1,s=t.match(/(\d+)/);if(!s)return null;let a=parseInt(s[1],10);return isNaN(a)?null:l*a}function a(e){if(!e)return null;let t=e.match(/([A-Z][a-z]{2,})\s+(\d{1,2}),\s+(\d{4})/);if(!t)return null;let r={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"}[t[1]];if(!r)return null;let l=String(t[2]).padStart(2,"0"),s=t[3];return`${s}-${r}-${l}`}function n(e){let t={"Reserve Bank credit":"연준 신용","Securities held outright":"보유 증권","U.S. Treasury securities":"미 국채",Bills:"단기채","Notes and bonds":"중장기채",TIPS:"물가연동채","Mortgage-backed securities":"주택저당증권","Repurchase agreements":"레포",Loans:"대출","Primary credit":"1차 신용","Bank Term Funding Program":"은행기간대출",BTFP:"은행기간대출","Central bank liquidity swaps":"통화스왑",Gold:"금",SDR:"SDR","Reverse repurchase agreements":"역레포","Currency in circulation":"유통 통화","U.S. Treasury, General Account":"TGA","Deposits with F.R. Banks, other than reserve balances":"예금 (지준금 제외)","Other liabilities and capital":"기타 부채\xb7자본","Reserve balances with Federal Reserve Banks":"지급준비금"};if(t[e])return t[e];for(let[r,l]of Object.entries(t))if(e.toLowerCase().includes(r.toLowerCase())||r.toLowerCase().includes(e.toLowerCase()))return l;return e}async function i(e,t){let r=l.zD(e),i=[];r("table").each((e,t)=>{let l=r(t),a=l.text().toLowerCase();if(a.includes("factors affecting reserve balances")||a.includes("reserve bank credit")){let e=[];l.find("thead tr, tr:first-child").first().find("th, td").each((t,l)=>{let s=r(l).text().trim();s&&e.push(s)}),l.find("tbody tr, tr").each((e,t)=>{let l=r(t),a=l.find("td, th");if(0===a.length)return;let n=l.find("td:first-child, th:first-child").text().trim();if(!n||n.length<3)return;let o=[];a.slice(1).each((e,t)=>{let l=s(r(t).text().trim());null!==l&&o.push(l)}),n&&o.length>0&&i.push({label:n,values:o})})}});let c=r("body").text().replace(/\r/g,""),f=c.split("\n").map(e=>e.replace(/\u00a0/g," ").trim()).filter(Boolean),u=a((f.find(e=>e.startsWith("Release Date:"))??"").replace("Release Date:","").trim())||"",d="";for(let e=0;e<f.length;e++){let t=f[e];if(t.includes("Week ended")&&!t.toLowerCase().includes("change from")){let e=t.match(/Week\s+ended\s+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);if(e){d=e[1].trim();break}}}let h=a(d)||"";if(-1===c.toLowerCase().indexOf("factors affecting reserve balances"))throw Error('Table 1 "Factors Affecting Reserve Balances" not found');let g=-1,m=-1,p=-1,w=-1,b="",y="";for(let e=0;e<f.length;e++){let t=f[e].toLowerCase();if(t.includes("week ended")&&t.includes("change from")){g=e;let t=f[e].split(/\s{2,}|\t/).map(e=>e.trim()).filter(Boolean);for(let r=0;r<t.length;r++){let l=t[r].toLowerCase();if(l.includes("week ended")&&!l.includes("change"))m=r,f[e].match(/Week\s+ended\s+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);else if(l.includes("change from week ended")){p=r;let t=f[e].match(/Change\s+from\s+week\s+ended:\s*([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);t&&(b=t[1].trim())}else if((l.includes("change from:")||l.includes("change from"))&&p>=0&&r>p){w=r;let t=f[e].match(/Change\s+from:\s*([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);t&&(y=t[1].trim())}}break}}if(-1===g)for(let e=0;e<f.length;e++){let t=f[e];if(t.match(/Week\s+ended/i)&&t.match(/Change\s+from/i)){g=e,t.split(/\s{3,}/).map(e=>e.trim()).filter(Boolean),m=0,p=1,w=2,t.match(/Week\s+ended\s+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);let r=t.match(/Change\s+from\s+week\s+ended[:\s]+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i),l=t.match(/Change\s+from[:\s]+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);r&&(b=r[1].trim()),l&&(y=l[1].trim());break}}if(-1===g)throw Error("Table 1 header not found");let k=a(b)||"";console.log("[parseFactorsTable1] Header found at line",g,{weekEndedColIndex:m,changeFromWeekEndedColIndex:p,changeFromYearAgoColIndex:w,prevWeekEndedText:b,yearAgoLabel:y});let v=[],C=["Reserve Bank credit","Reserve bank credit"],L=["Total factors supplying reserve funds","Total factors supplying"],R=-1,T=-1;for(let e=g+1;e<f.length;e++){let t=f[e];if(-1===R){for(let r of C)if(t.toLowerCase().includes(r.toLowerCase())){R=e;break}}if(R>=0&&-1===T){for(let r of L)if(t.toLowerCase().includes(r.toLowerCase())){T=e;break}}if(T>=0)break}if(-1===R)throw Error("Supplying factors section not found");for(let e=R;e<(T>0?T:f.length);e++){let t=f[e];if(!t.trim()||/^\s*[\d,\s+-]+\s*$/.test(t)||t.toLowerCase().includes("total factors supplying"))continue;let r=t.match(/^([^0-9+-]+?)(?:\s{2,}|\t)/);if(!r)continue;let l=r[1].trim();if(!l||l.length<3)continue;let s=o(t);s.length>=3?v.push({key:l,labelKo:n(l),value:s[0]||0,wow:s[1]||0,yoy:s[2]||0}):s.length>=1&&v.push({key:l,labelKo:n(l),value:s[0]||0,wow:0,yoy:0})}let A=0,B=0,S=0;if(T>=0){let e=o(f[T]);e.length>=3&&(A=e[0]||0,B=e[1]||0,S=e[2]||0)}let x=[],z=["Total factors, other than reserve balances, absorbing reserve funds","Total factors absorbing"],F=T>=0?T+1:f.length,Z=-1,D=-1;for(let e=F;e<f.length;e++){let t=f[e];if(-1===Z){for(let r of z)if(t.toLowerCase().includes(r.toLowerCase())){Z=e;break}}if(-1===D&&t.toLowerCase().includes("reserve balances with federal reserve banks")&&(D=e),Z>=0&&D>=0)break}for(let e=F;e<(Z>0?Z:f.length);e++){let t=f[e];if(!t.trim()||/^\s*[\d,\s+-]+\s*$/.test(t)||t.toLowerCase().includes("total factors")||t.toLowerCase().includes("reserve balances"))continue;let r=t.match(/^([^0-9+-]+?)(?:\s{2,}|\t)/);if(!r)continue;let l=r[1].trim();if(!l||l.length<3)continue;let s=o(t);s.length>=3?x.push({key:l,labelKo:n(l),value:s[0]||0,wow:s[1]||0,yoy:s[2]||0}):s.length>=1&&x.push({key:l,labelKo:n(l),value:s[0]||0,wow:0,yoy:0})}let W=0,$=0,E=0;if(Z>=0){let e=o(f[Z]);e.length>=3&&(W=e[0]||0,$=e[1]||0,E=e[2]||0)}let K=0,M=0,N=0;if(D>=0){let e=o(f[D]);e.length>=3&&(K=e[0]||0,M=e[1]||0,N=e[2]||0)}let O=A-W,P=Math.abs(O-K),G=P<=10;return G||console.warn("[parseFactorsTable1] Reserve balances mismatch:",{calculated:O,fromSource:K,delta:P}),{releaseDate:u,weekEnded:h,prevWeekEnded:k,yearAgoLabel:y,supplying:v,absorbing:x,totals:{totalSupplying:{value:A,wow:B,yoy:S},totalAbsorbingExReserves:{value:W,wow:$,yoy:E},reserveBalances:{value:K,wow:M,yoy:N}},integrity:{calcReserveBalances:O,delta:P,ok:G}}}function o(e){let t=[];for(let r of e.split(/\s{2,}|\t/).map(e=>e.trim()).filter(Boolean)){let e=s(r);null!==e&&t.push(e)}if(t.length<3){let r;let l=/([+-]?\s*[\d,]+)/g,a=[];for(;null!==(r=l.exec(e))&&a.length<3;){let e=s(r[1]);null!==e&&a.push(e)}if(a.length>t.length)return a}return t}}};