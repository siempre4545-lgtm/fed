"use strict";exports.id=302,exports.ids=[302],exports.modules={302:(e,t,r)=>{r.d(t,{parseFactorsTable1:()=>o});var s=r(3751);function a(e){if(!e)return null;let t=e.replace(/[\u00a0\s,]/g,"").trim();if(!t)return null;let r=t.match(/^([+-])?/),s=r&&"-"===r[1]?-1:1,a=t.match(/(\d+)/);if(!a)return null;let n=parseInt(a[1],10);return isNaN(n)?null:s*n}function n(e){if(!e)return null;let t=e.match(/([A-Z][a-z]{2,})\s+(\d{1,2}),\s+(\d{4})/);if(!t)return null;let r={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"}[t[1]];if(!r)return null;let s=String(t[2]).padStart(2,"0"),a=t[3];return`${a}-${r}-${s}`}function l(e){let t={"Reserve Bank credit":"연준 신용","Securities held outright":"보유 증권","U.S. Treasury securities":"미 국채",Bills:"단기채","Notes and bonds":"중장기채",TIPS:"물가연동채","Mortgage-backed securities":"주택저당증권","Repurchase agreements":"레포",Loans:"대출","Primary credit":"1차 신용","Bank Term Funding Program":"은행기간대출",BTFP:"은행기간대출","Central bank liquidity swaps":"통화스왑",Gold:"금",SDR:"SDR","Reverse repurchase agreements":"역레포","Currency in circulation":"유통 통화","U.S. Treasury, General Account":"TGA","Deposits with F.R. Banks, other than reserve balances":"예금 (지준금 제외)","Other liabilities and capital":"기타 부채\xb7자본","Reserve balances with Federal Reserve Banks":"지급준비금"};if(t[e])return t[e];for(let[r,s]of Object.entries(t))if(e.toLowerCase().includes(r.toLowerCase())||r.toLowerCase().includes(e.toLowerCase()))return s;return e}async function o(e,t){let r=s.zD(e),o=[];r("table").each((e,t)=>{let s=r(t),n=s.text().toLowerCase();if(n.includes("factors affecting reserve balances")||n.includes("reserve bank credit")){let e=[];s.find("thead tr, tr:first-child").first().find("th, td").each((t,s)=>{let a=r(s).text().trim();a&&e.push(a)}),s.find("tbody tr, tr").each((e,t)=>{let s=r(t),n=s.find("td, th");if(0===n.length)return;let l=s.find("td:first-child, th:first-child").text().trim();if(!l||l.length<3)return;let i=[];n.slice(1).each((e,t)=>{let s=a(r(t).text().trim());null!==s&&i.push(s)}),l&&i.length>0&&o.push({label:l,values:i})})}});let c=r("body").text().replace(/\r/g,""),d=c.split("\n").map(e=>e.replace(/\u00a0/g," ").trim()).filter(Boolean),u=n((d.find(e=>e.startsWith("Release Date:"))??"").replace("Release Date:","").trim())||"",f="";for(let e=0;e<d.length;e++){let t=d[e];if(t.includes("Week ended")&&!t.toLowerCase().includes("change from")){let e=t.match(/Week\s+ended\s+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);if(e){f=e[1].trim();break}}}let h=n(f)||"";if(-1===c.toLowerCase().indexOf("factors affecting reserve balances")){let e=!1;for(let t of["reserve bank credit","table 1","factors supplying","factors absorbing"]){let r=c.toLowerCase().indexOf(t);if(-1!==r){console.warn(`[parseFactorsTable1] Table 1 not found with primary keyword, but found "${t}" at index ${r}`),e=!0;break}}if(!e)throw console.error("[parseFactorsTable1] Table 1 section not found. Text length:",c.length),console.error("[parseFactorsTable1] First 1000 chars of text:",c.substring(0,1e3)),Error('Table 1 "Factors Affecting Reserve Balances" not found in HTML')}let g=-1,p=-1,b=-1,m=-1,w="",y="";for(let e=0;e<d.length;e++){let t=d[e].toLowerCase();if(t.includes("week ended")&&t.includes("change from")){g=e;let t=d[e].split(/\s{2,}|\t/).map(e=>e.trim()).filter(Boolean);for(let r=0;r<t.length;r++){let s=t[r].toLowerCase();if(s.includes("week ended")&&!s.includes("change"))p=r,d[e].match(/Week\s+ended\s+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);else if(s.includes("change from week ended")){b=r;let t=d[e].match(/Change\s+from\s+week\s+ended:\s*([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);t&&(w=t[1].trim())}else if((s.includes("change from:")||s.includes("change from"))&&b>=0&&r>b){m=r;let t=d[e].match(/Change\s+from:\s*([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);t&&(y=t[1].trim())}}break}}if(-1===g){console.warn("[parseFactorsTable1] Header not found with standard pattern, trying flexible search...");for(let e=0;e<Math.min(300,d.length);e++){let t=d[e],r=t.toLowerCase();if(r.includes("week")||r.includes("change")){let r=[e>0?d[e-1]:"",t,e+1<d.length?d[e+1]:""].join(" ").toLowerCase();if(r.includes("week")&&r.includes("change")){g=e,p=0,b=1,m=2;let r=[e>0?d[e-1]:"",t,e+1<d.length?d[e+1]:""].join(" ");r.match(/Week\s+ended\s+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);let s=r.match(/Change\s+from\s+week\s+ended[:\s]+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i),a=r.match(/Change\s+from[:\s]+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);s&&(w=s[1].trim()),a&&(y=a[1].trim()),console.log(`[parseFactorsTable1] Found header at line ${e} with flexible search`);break}}}}if(-1===g){console.error("[parseFactorsTable1] Header not found. Searching in lines:",{totalLines:d.length,sampleLines:d.slice(0,100)});let e=[];for(let t=0;t<Math.min(200,d.length);t++){let r=d[t].toLowerCase();(r.includes("week")||r.includes("change")||r.includes("ended"))&&e.push({line:t,text:d[t]})}console.error("[parseFactorsTable1] Potential header lines:",e.slice(0,20)),console.warn("[parseFactorsTable1] Header not found, using default column indices"),g=0,p=0,b=1,m=2}let k=n(w)||"";console.log("[parseFactorsTable1] Header found at line",g,{weekEndedColIndex:p,changeFromWeekEndedColIndex:b,changeFromYearAgoColIndex:m,prevWeekEndedText:w,yearAgoLabel:y});let T=[],F=(e,t=0)=>{for(let r=t;r<d.length;r++)if(d[r]===e)return r;let r=e.toLowerCase();for(let e=t;e<d.length;e++)if(d[e].toLowerCase()===r)return e;let s=r.split(/[,\s]+/).filter(e=>e.length>3);for(let e=t;e<d.length;e++){let t=d[e].toLowerCase();if(s.every(e=>t.includes(e)))return e}return -1},v=F("Reserve Bank credit",g+1);-1===v&&(v=F("Reserve bank credit",g+1));let C=F("Total factors supplying reserve funds",v>=0?v:g+1);if(-1===C&&(C=F("Total factors supplying",v>=0?v:g+1)),-1===v)throw console.error("[parseFactorsTable1] Supplying factors section not found. Searching for keywords:",{headerLineIndex:g,linesAroundHeader:d.slice(Math.max(0,g-5),Math.min(g+50,d.length))}),Error('Supplying factors section not found. Expected "Reserve Bank credit" after header');for(let e of(console.log(`[parseFactorsTable1] Supplying factors section: ${v} to ${C>0?C:"end"}`),console.log(`[parseFactorsTable1] Parsing supplying factors from line ${v} to ${C>0?C:d.length}`),["Reserve Bank credit","Securities held outright","U.S. Treasury securities","Bills","Notes and bonds","Notes and bonds, nominal","Notes and bonds, inflation-indexed","Inflation compensation","Federal agency debt securities","Mortgage-backed securities","Unamortized premiums on securities held outright","Unamortized discounts on securities held outright","Repurchase agreements","Loans","Primary credit","Secondary credit","Seasonal credit","Paycheck Protection Program Liquidity Facility","Bank Term Funding Program","Other credit extensions","Net portfolio holdings of MS Facilities 2020 LLC","Float","Central bank liquidity swaps","Other Federal Reserve assets","Gold Stock","Special Drawing Rights Certificate Account","Treasury Currency Outstanding"])){let t=v,r=C>0?C:Math.min(v+200,d.length),s=F(e,t);if(s<0||s>=r||e.toLowerCase().includes("total factors supplying"))continue;let n=0,o=0,i=0,c=[];for(let e=1;e<=5&&s+e<d.length;e++){let t=a(d[s+e]);null!==t&&c.push(t)}c.length>=1&&(n=c[0],o=c.length>=2?c[1]:0,i=c.length>=3?c[2]:0,T.push({key:e,labelKo:l(e),value:n,wow:o,yoy:i}),console.log(`[parseFactorsTable1] Added supplying factor: ${e} = ${n} (wow: ${o}, yoy: ${i})`))}console.log(`[parseFactorsTable1] Parsed ${T.length} supplying factors`);let L=0,R=0,$=0;if(C>=0){let e=i(d[C]);e.length>=3&&(L=e[0]||0,R=e[1]||0,$=e[2]||0)}let S=[],x=C>=0?C+1:d.length,A=-1,B=-1,M=-1;for(let e=x;e<Math.min(x+100,d.length);e++){let t=d[e].toLowerCase();if(t.includes("continued")||t.includes("table 1 (continued)")){M=e;break}}let P=M>=0?Math.min(x,M):x;for(let e of(-1===(A=F("Total factors, other than reserve balances, absorbing reserve funds",P))&&(A=F("Total factors absorbing",P)),B=F("Reserve balances with Federal Reserve Banks",P),console.log(`[parseFactorsTable1] Absorbing factors section: ${P} to ${A>0?A:"end"}, Reserve balances at: ${B}`),console.log(`[parseFactorsTable1] Parsing absorbing factors from line ${P} to ${A>0?A:d.length}`),["Currency in circulation","Reverse repurchase agreements","Reverse repurchase agreements with foreign official and international accounts","Reverse repurchase agreements with others","Treasury Cash Holdings","Deposits with F.R. Banks, other than reserve balances","U.S. Treasury, General Account","Foreign official","Other","Other liabilities and capital"])){let t=A>0?A:Math.min(P+200,d.length),r=F(e,P);if(r<0||r>=t||e.toLowerCase().includes("total factors")||e.toLowerCase().includes("reserve balances"))continue;let s=[];for(let e=1;e<=5&&r+e<d.length;e++){let t=a(d[r+e]);null!==t&&s.push(t)}if(s.length>=1){let t=s[0],r=s.length>=2?s[1]:0,a=s.length>=3?s[2]:0;S.push({key:e,labelKo:l(e),value:t,wow:r,yoy:a}),console.log(`[parseFactorsTable1] Added absorbing factor: ${e} = ${t} (wow: ${r}, yoy: ${a})`)}}console.log(`[parseFactorsTable1] Parsed ${S.length} absorbing factors`);let z=0,O=0,D=0;if(A>=0){let e=i(d[A]);e.length>=3&&(z=e[0]||0,O=e[1]||0,D=e[2]||0)}let N=0,Z=0,H=0;if(B>=0){let e=i(d[B]);e.length>=3&&(N=e[0]||0,Z=e[1]||0,H=e[2]||0)}let U=L-z,G=Math.abs(U-N),W=G<=10;return W||console.warn("[parseFactorsTable1] Reserve balances mismatch:",{calculated:U,fromSource:N,delta:G}),{releaseDate:u,weekEnded:h,prevWeekEnded:k,yearAgoLabel:y,supplying:T,absorbing:S,totals:{totalSupplying:{value:L,wow:R,yoy:$},totalAbsorbingExReserves:{value:z,wow:O,yoy:D},reserveBalances:{value:N,wow:Z,yoy:H}},integrity:{calcReserveBalances:U,delta:G,ok:W}}}function i(e){let t;let r=[],s=/([+-]?\s*[\d,]+(?:\.[\d]+)?)/g,n=[];for(;null!==(t=s.exec(e));){let e=a(t[1]);null!==e&&n.push(e)}if(n.length>0)return n;for(let t of e.split(/\s{2,}|\t/).map(e=>e.trim()).filter(Boolean)){let e=a(t);null!==e&&r.push(e)}return r}}};