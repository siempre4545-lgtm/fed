"use strict";exports.id=302,exports.ids=[302],exports.modules={302:(e,t,r)=>{r.d(t,{parseFactorsTable1:()=>o});var l=r(3751);function a(e){if(!e)return null;let t=e.replace(/[\u00a0\s,]/g,"").trim();if(!t)return null;let r=t.match(/^([+-])?/),l=r&&"-"===r[1]?-1:1,a=t.match(/(\d+)/);if(!a)return null;let s=parseInt(a[1],10);return isNaN(s)?null:l*s}function s(e){if(!e)return null;let t=e.match(/([A-Z][a-z]{2,})\s+(\d{1,2}),\s+(\d{4})/);if(!t)return null;let r={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"}[t[1]];if(!r)return null;let l=String(t[2]).padStart(2,"0"),a=t[3];return`${a}-${r}-${l}`}function n(e){let t={"Reserve Bank credit":"연준 신용","Securities held outright":"보유 증권","U.S. Treasury securities":"미 국채",Bills:"단기채","Notes and bonds":"중장기채",TIPS:"물가연동채","Mortgage-backed securities":"주택저당증권","Repurchase agreements":"레포",Loans:"대출","Primary credit":"1차 신용","Bank Term Funding Program":"은행기간대출",BTFP:"은행기간대출","Central bank liquidity swaps":"통화스왑",Gold:"금",SDR:"SDR","Reverse repurchase agreements":"역레포","Currency in circulation":"유통 통화","U.S. Treasury, General Account":"TGA","Deposits with F.R. Banks, other than reserve balances":"예금 (지준금 제외)","Other liabilities and capital":"기타 부채\xb7자본","Reserve balances with Federal Reserve Banks":"지급준비금"};if(t[e])return t[e];for(let[r,l]of Object.entries(t))if(e.toLowerCase().includes(r.toLowerCase())||r.toLowerCase().includes(e.toLowerCase()))return l;return e}async function o(e,t){let r=l.zD(e),o=[];r("table").each((e,t)=>{let l=r(t),s=l.text().toLowerCase();if(s.includes("factors affecting reserve balances")||s.includes("reserve bank credit")){let e=[];l.find("thead tr, tr:first-child").first().find("th, td").each((t,l)=>{let a=r(l).text().trim();a&&e.push(a)}),l.find("tbody tr, tr").each((e,t)=>{let l=r(t),s=l.find("td, th");if(0===s.length)return;let n=l.find("td:first-child, th:first-child").text().trim();if(!n||n.length<3)return;let i=[];s.slice(1).each((e,t)=>{let l=a(r(t).text().trim());null!==l&&i.push(l)}),n&&i.length>0&&o.push({label:n,values:i})})}});let c=r("body").text().replace(/\r/g,""),d=c.split("\n").map(e=>e.replace(/\u00a0/g," ").trim()).filter(Boolean),f=s((d.find(e=>e.startsWith("Release Date:"))??"").replace("Release Date:","").trim())||"",u="";for(let e=0;e<d.length;e++){let t=d[e];if(t.includes("Week ended")&&!t.toLowerCase().includes("change from")){let e=t.match(/Week\s+ended\s+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);if(e){u=e[1].trim();break}}}let h=s(u)||"";if(-1===c.toLowerCase().indexOf("factors affecting reserve balances")){let e=!1;for(let t of["reserve bank credit","table 1","factors supplying","factors absorbing"]){let r=c.toLowerCase().indexOf(t);if(-1!==r){console.warn(`[parseFactorsTable1] Table 1 not found with primary keyword, but found "${t}" at index ${r}`),e=!0;break}}if(!e)throw console.error("[parseFactorsTable1] Table 1 section not found. Text length:",c.length),console.error("[parseFactorsTable1] First 1000 chars of text:",c.substring(0,1e3)),Error('Table 1 "Factors Affecting Reserve Balances" not found in HTML')}let g=-1,b=-1,m=-1,p=-1,w="",k="";for(let e=0;e<d.length;e++){let t=d[e].toLowerCase();if(t.includes("week ended")&&t.includes("change from")){g=e;let t=d[e].split(/\s{2,}|\t/).map(e=>e.trim()).filter(Boolean);for(let r=0;r<t.length;r++){let l=t[r].toLowerCase();if(l.includes("week ended")&&!l.includes("change"))b=r,d[e].match(/Week\s+ended\s+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);else if(l.includes("change from week ended")){m=r;let t=d[e].match(/Change\s+from\s+week\s+ended:\s*([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);t&&(w=t[1].trim())}else if((l.includes("change from:")||l.includes("change from"))&&m>=0&&r>m){p=r;let t=d[e].match(/Change\s+from:\s*([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);t&&(k=t[1].trim())}}break}}if(-1===g)for(let e=0;e<d.length;e++){let t=d[e];if(t.match(/Week\s+ended/i)&&t.match(/Change\s+from/i)){g=e,t.split(/\s{3,}/).map(e=>e.trim()).filter(Boolean),b=0,m=1,p=2,t.match(/Week\s+ended\s+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);let r=t.match(/Change\s+from\s+week\s+ended[:\s]+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i),l=t.match(/Change\s+from[:\s]+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);r&&(w=r[1].trim()),l&&(k=l[1].trim());break}}if(-1===g){console.error("[parseFactorsTable1] Header not found. Searching in lines:",{totalLines:d.length,sampleLines:d.slice(0,50)});for(let e=0;e<Math.min(100,d.length);e++){let t=d[e].toLowerCase();(t.includes("week")||t.includes("change"))&&console.warn(`[parseFactorsTable1] Potential header at line ${e}:`,d[e])}throw Error('Table 1 header not found. Expected line with "Week ended" and "Change from"')}let y=s(w)||"";console.log("[parseFactorsTable1] Header found at line",g,{weekEndedColIndex:b,changeFromWeekEndedColIndex:m,changeFromYearAgoColIndex:p,prevWeekEndedText:w,yearAgoLabel:k});let C=[],v=["Reserve Bank credit","Reserve bank credit"],L=["Total factors supplying reserve funds","Total factors supplying"],T=-1,x=-1;for(let e=g+1;e<d.length;e++){let t=d[e];if(-1===T){for(let r of v)if(t.toLowerCase().includes(r.toLowerCase())){T=e;break}}if(T>=0&&-1===x){for(let r of L)if(t.toLowerCase().includes(r.toLowerCase())){x=e;break}}if(x>=0)break}if(-1===T)throw console.error("[parseFactorsTable1] Supplying factors section not found. Searching for keywords:",{headerLineIndex:g,linesAroundHeader:d.slice(Math.max(0,g-5),g+20)}),Error('Supplying factors section not found. Expected "Reserve Bank credit" after header');for(let e=T;e<(x>0?x:d.length);e++){let t=d[e];if(!t.trim()||/^\s*[\d,\s+-]+\s*$/.test(t)||t.toLowerCase().includes("total factors supplying"))continue;let r=t.match(/^([^0-9+-]+?)(?:\s{2,}|\t)/);if(!r)continue;let l=r[1].trim();if(!l||l.length<3)continue;let a=i(t);a.length>=3?C.push({key:l,labelKo:n(l),value:a[0]||0,wow:a[1]||0,yoy:a[2]||0}):a.length>=1&&C.push({key:l,labelKo:n(l),value:a[0]||0,wow:0,yoy:0})}let F=0,R=0,A=0;if(x>=0){let e=i(d[x]);e.length>=3&&(F=e[0]||0,R=e[1]||0,A=e[2]||0)}let S=[],B=["Total factors, other than reserve balances, absorbing reserve funds","Total factors absorbing"],z=x>=0?x+1:d.length,M=-1,Z=-1,$=-1;for(let e=z;e<d.length;e++){let t=d[e].toLowerCase();if(t.includes("continued")||t.includes("table 1 (continued)")){$=e;break}}let D=$>=0?Math.min(z,$):z;for(let e=D;e<d.length;e++){let t=d[e];if(-1===M){for(let r of B)if(t.toLowerCase().includes(r.toLowerCase())){M=e;break}}if(-1===Z&&t.toLowerCase().includes("reserve balances with federal reserve banks")&&(Z=e),M>=0&&Z>=0)break}for(let e=D;e<(M>0?M:d.length);e++){let t=d[e];if(!t.trim()||/^\s*[\d,\s+-]+\s*$/.test(t)||t.toLowerCase().includes("continued")&&t.toLowerCase().includes("table")||t.toLowerCase().includes("total factors")||t.toLowerCase().includes("reserve balances"))continue;let r=t.match(/^([^0-9+-]+?)(?:\s{2,}|\t)/);if(!r)continue;let l=r[1].trim();if(!l||l.length<3)continue;let a=i(t);a.length>=3?S.push({key:l,labelKo:n(l),value:a[0]||0,wow:a[1]||0,yoy:a[2]||0}):a.length>=1&&S.push({key:l,labelKo:n(l),value:a[0]||0,wow:0,yoy:0})}let W=0,E=0,O=0;if(M>=0){let e=i(d[M]);e.length>=3&&(W=e[0]||0,E=e[1]||0,O=e[2]||0)}let P=0,H=0,K=0;if(Z>=0){let e=i(d[Z]);e.length>=3&&(P=e[0]||0,H=e[1]||0,K=e[2]||0)}let N=F-W,G=Math.abs(N-P),J=G<=10;return J||console.warn("[parseFactorsTable1] Reserve balances mismatch:",{calculated:N,fromSource:P,delta:G}),{releaseDate:f,weekEnded:h,prevWeekEnded:y,yearAgoLabel:k,supplying:C,absorbing:S,totals:{totalSupplying:{value:F,wow:R,yoy:A},totalAbsorbingExReserves:{value:W,wow:E,yoy:O},reserveBalances:{value:P,wow:H,yoy:K}},integrity:{calcReserveBalances:N,delta:G,ok:J}}}function i(e){let t=[];for(let r of e.split(/\s{2,}|\t/).map(e=>e.trim()).filter(Boolean)){let e=a(r);null!==e&&t.push(e)}if(t.length<3){let r;let l=/([+-]?\s*[\d,]+)/g,s=[];for(;null!==(r=l.exec(e))&&s.length<3;){let e=a(r[1]);null!==e&&s.push(e)}if(s.length>t.length)return s}return t}}};