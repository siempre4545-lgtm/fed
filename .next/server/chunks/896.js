"use strict";exports.id=896,exports.ids=[896],exports.modules={2896:(e,l,t)=>{t.d(l,{v9:()=>m,AU:()=>k,lm:()=>h});var n=t(3751);function r(e){if(!e)return null;let l=e.replace(/\u00a0/g," ").trim();if(!l)return null;let t=l.match(/^([+-])?\s*([\d,]+(?:\.[\d]+)?)$/);if(!t)return null;let n="-"===t[1]?-1:1,r=Number(t[2].replace(/,/g,""));return Number.isFinite(r)?n*r:null}function a(e){return e.replace(/\u00a0/g," ").replace(/[()]/g," ").replace(/\./g," ").replace(/&/g,"and").replace(/,/g," ").replace(/\s+/g," ").toLowerCase().trim()}function s(e,l){let t=e("body"),n=t.text();for(let r of l){if(!n.includes(r))continue;let l=t.find("*"),a=null;for(let t=0;t<l.length;t++){let n=l[t];e(n).text().includes(r)&&(!a||e(n).children().length<e(a).children().length)&&(a=n)}if(a){let l=e(a).closest("table");if(0===l.length&&(l=e(a).closest("div, section")),0===l.length&&(l=e(a).parent()),l.length>0&&l[0]!==t[0])return l}}return null}function u(e,l){if(0===l.length)return null;let t=l.find("table").first();if(t.length>0)return t;let n=l.nextAll(),r=0;for(let e=0;e<n.length&&r<12;e++){let l=n.eq(e);r++;let t=l.prop("tagName")?.toLowerCase();if(t&&["h1","h2","h3","h4","h5","h6"].includes(t)&&l.text().trim().length>0)break;let a=l.find("table").first();if(a.length>0)return a;if("table"===t)return l}let a=l.parent();if(a.length>0){let e=a.find("table").first();if(e.length>0)return e}let s=l.prevAll();r=0;for(let e=0;e<s.length&&r<12;e++){let l=s.eq(e);r++;let t=l.find("table").first();if(t.length>0)return t;if("table"===l.prop("tagName")?.toLowerCase())return l}return null}function o(e,l,t){let n=l.find("tr");for(let l=0;l<n.length;l++){let r=n[l];if(function(e,l){let t=a(e);for(let e of l){let l=a(e);if(t===l)return e;let n=l.split(/\s+/).filter(e=>e.length>2);if(n.length>0&&n.every(e=>t.includes(e)))return e}return null}(e(r).find("td, th").first().text().trim(),t))return e(r)}return null}function i(e,l,t){let n=l.find("tr").slice(0,3);for(let l=0;l<n.length;l++){let r=e(n[l]).find("td, th");for(let l=0;l<r.length;l++){let n=a(e(r[l]).text().trim());for(let e of t){let t=a(e);if(n.includes(t))return l}}}return -1}function c(e){if(!e)return null;let l=e.match(/([A-Z][a-z]{2,})\s+(\d{1,2}),\s+(\d{4})/);if(!l)return null;let t={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"}[l[1]];if(!t)return null;let n=String(l[2]).padStart(2,"0"),r=l[3];return`${r}-${t}-${n}`}function f(e){return e.replace(/-/g,"")}async function h(e){let l=f(e);try{let t=`https://www.federalreserve.gov/releases/h41/${l}/`,r=await fetch(t,{headers:{"User-Agent":"Mozilla/5.0 (compatible; fedreportsh/1.0; +https://fedreportsh.vercel.app)",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9","Cache-Control":"no-cache",Pragma:"no-cache"},cache:"no-store",redirect:"follow"});404===r.status&&(t=`https://www.federalreserve.gov/releases/h41/${l}/default.htm`,r=await fetch(t,{headers:{"User-Agent":"Mozilla/5.0 (compatible; fedreportsh/1.0; +https://fedreportsh.vercel.app)",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9","Cache-Control":"no-cache",Pragma:"no-cache"},cache:"no-store",redirect:"follow"}));let a=r.headers.get("content-type")||"unknown",f=await r.text(),h=f.replace(/\s+/g," ").substring(0,500),v=["Access Denied","robot","captcha","Request Rejected","Forbidden"].some(e=>f.toLowerCase().includes(e.toLowerCase()));if(console.warn(`[parseH41HTML] Fetch result for ${l}:`,{url:t,status:r.status,statusText:r.statusText,contentType:a,htmlLength:f.length,htmlPreview:h,flagged:v}),!r.ok)throw Error(`Failed to fetch H.4.1 HTML: ${r.status} ${r.statusText}`);v&&console.warn(`[parseH41HTML] WARNING: Blocked keywords detected in HTML for ${l}`);let m=n.zD(f),k=function(e){let l=e("body").text().match(/Release\s+Date[:\s]+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);if(l){let e=c(l[1]);if(e)return e}return""}(m),A=function(e){let l=e("body").text().match(/Week\s+ended[:\s]+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);if(l){let e=c(l[1]);if(e)return e}return""}(m),T=[],x=function(e,l){let t=s(e,["Factors Affecting Reserve Balances","Table 1"]);if(!t||0===t.length)return l.push("Overview section not found"),g();let n=u(e,t);if(!n||0===n.length)return l.push("Overview table not found"),g();let r=i(e,n,["Week ended","Level"]),a=i(e,n,["Change from previous week","Change from week ended"]),o=i(e,n,["Change from year ago","Change from:"]),c=y(n,e,["Total factors supplying reserve funds"],r,l),f=y(n,e,["Securities held outright"],r,l),h=y(n,e,["Reserve balances with Federal Reserve Banks"],r,l),d=y(n,e,["U.S. Treasury, General Account","Treasury General Account"],r,l),p=y(n,e,["Reverse repurchase agreements"],r,l),b=y(n,e,["Currency in circulation"],r,l),v=y(n,e,["Total factors supplying reserve funds"],a,l),w=y(n,e,["Total factors supplying reserve funds"],o,l),m=y(n,e,["Securities held outright"],a,l),k=y(n,e,["Securities held outright"],o,l),A=y(n,e,["Reserve balances with Federal Reserve Banks"],a,l),T=y(n,e,["Reserve balances with Federal Reserve Banks"],o,l),x=y(n,e,["U.S. Treasury, General Account","Treasury General Account"],a,l),R=y(n,e,["U.S. Treasury, General Account","Treasury General Account"],o,l),C=y(n,e,["Reverse repurchase agreements"],a,l),L=y(n,e,["Reverse repurchase agreements"],o,l),S=y(n,e,["Currency in circulation"],a,l),K=y(n,e,["Currency in circulation"],o,l),F=s(e,["Consolidated Statement of Condition","Table 5"]),B=null,$=null,M=null,q=null;if(F&&F.length>0){let t=u(e,F);if(t&&t.length>0){let n=i(e,t,["Assets","Level"]);B=y(t,e,["Total assets"],n,l),$=y(t,e,["U.S. Treasury securities"],n,l),M=y(t,e,["Mortgage-backed securities"],n,l),q=y(t,e,["Other assets"],n,l)}}return{totalAssets:c,securities:f,reserveBalances:h,tga:d,reverseRepos:p,currency:b,totalAssetsWeekly:v,totalAssetsYearly:w,securitiesWeekly:m,securitiesYearly:k,reserveBalancesWeekly:A,reserveBalancesYearly:T,tgaWeekly:x,tgaYearly:R,reverseReposWeekly:C,reverseReposYearly:L,currencyWeekly:S,currencyYearly:K,totalAssetsForComposition:B,treasurySecurities:$,mortgageBackedSecurities:M,otherAssets:q}}(m,T),R=function(e,l){let t=s(e,["Factors Affecting Reserve Balances","Table 1"]);if(!t||0===t.length)return l.push("Factors section not found"),p();let n=u(e,t);if(!n||0===n.length)return l.push("Factors table not found"),p();let r=i(e,n,["Week ended","Level"]),a=i(e,n,["Change from previous week","Change from week ended"]),o=i(e,n,["Change from year ago","Change from:"]),c=[{label:"Reserve Bank credit",labelKo:"연준 신용",value:null,weekly:null,yearly:null},{label:"Securities held outright",labelKo:"보유 증권",value:null,weekly:null,yearly:null},{label:"U.S. Treasury securities",labelKo:"미 국채",value:null,weekly:null,yearly:null},{label:"Bills",labelKo:"단기채",value:null,weekly:null,yearly:null},{label:"Notes and bonds, nominal",labelKo:"중장기채",value:null,weekly:null,yearly:null},{label:"Notes and bonds, inflation-indexed",labelKo:"물가연동채",value:null,weekly:null,yearly:null},{label:"Mortgage-backed securities",labelKo:"주택저당증권",value:null,weekly:null,yearly:null},{label:"Repurchase agreements",labelKo:"레포",value:null,weekly:null,yearly:null},{label:"Loans",labelKo:"대출",value:null,weekly:null,yearly:null},{label:"Loans - Bank Term Funding Program",labelKo:"은행기간대출",value:null,weekly:null,yearly:null},{label:"Central bank liquidity swaps",labelKo:"통화스왑",value:null,weekly:null,yearly:null},{label:"Gold stock",labelKo:"금",value:null,weekly:null,yearly:null},{label:"Coin",labelKo:"SDR 증서",value:null,weekly:null,yearly:null}];for(let t of c)t.value=y(n,e,[t.label],r,l),t.weekly=y(n,e,[t.label],a,l),t.yearly=y(n,e,[t.label],o,l);let f=[{label:"Currency in circulation",labelKo:"유통 통화",value:null,weekly:null,yearly:null},{label:"Reverse repurchase agreements",labelKo:"역레포",value:null,weekly:null,yearly:null},{label:"Deposits with F.R. Banks, other than reserve balances",labelKo:"연준 예치금",value:null,weekly:null,yearly:null},{label:"U.S. Treasury, General Account",labelKo:"재무부 일반계정",value:null,weekly:null,yearly:null}];for(let t of f)t.value=y(n,e,[t.label],r,l),t.weekly=y(n,e,[t.label],a,l),t.yearly=y(n,e,[t.label],o,l);let h={value:y(n,e,["Total factors supplying reserve funds"],r,l),weekly:y(n,e,["Total factors supplying reserve funds"],a,l),yearly:y(n,e,["Total factors supplying reserve funds"],o,l)},d={value:y(n,e,["Total factors, other than reserve balances, absorbing reserve funds"],r,l),weekly:y(n,e,["Total factors, other than reserve balances, absorbing reserve funds"],a,l),yearly:y(n,e,["Total factors, other than reserve balances, absorbing reserve funds"],o,l)},g={value:y(n,e,["Reserve balances with Federal Reserve Banks"],r,l),weekly:y(n,e,["Reserve balances with Federal Reserve Banks"],a,l),yearly:y(n,e,["Reserve balances with Federal Reserve Banks"],o,l)};return 13!==c.length&&l.push(`Supplying items count mismatch: expected 13, got ${c.length}`),4!==f.length&&l.push(`Absorbing items count mismatch: expected 4, got ${f.length}`),{supplying:c,absorbing:f,totals:{totalSupplying:h,totalAbsorbing:d,reserveBalances:g}}}(m,T),C={supplyingTop:[R.supplying.find(e=>"보유 증권"===e.labelKo)||{label:"",labelKo:"보유 증권",value:null,weekly:null,yearly:null},R.supplying.find(e=>"레포"===e.labelKo)||{label:"",labelKo:"레포",value:null,weekly:null,yearly:null},R.supplying.find(e=>"대출"===e.labelKo)||{label:"",labelKo:"대출",value:null,weekly:null,yearly:null},R.supplying.find(e=>"통화스왑"===e.labelKo)||{label:"",labelKo:"통화스왑",value:null,weekly:null,yearly:null}].filter(e=>null!==e.value),absorbingTop:[R.absorbing.find(e=>"유통 통화"===e.labelKo)||{label:"",labelKo:"유통 통화",value:null,weekly:null,yearly:null},R.absorbing.find(e=>"역레포"===e.labelKo)||{label:"",labelKo:"역레포",value:null,weekly:null,yearly:null},R.absorbing.find(e=>"재무부 일반계정"===e.labelKo)||{label:"",labelKo:"재무부 일반계정",value:null,weekly:null,yearly:null},{label:"Reserve balances with Federal Reserve Banks",labelKo:"지급준비금",...R.totals.reserveBalances}].filter(e=>null!==e.value)},L=function(e,l){let t=s(e,["Maturity Distribution of Securities","Table 2"]);if(!t||0===t.length)return l.push("Maturity section not found"),b();let n=u(e,t);if(!n||0===n.length)return l.push("Maturity table not found"),b();let r=o(e,n,["U.S. Treasury securities"]),a=o(e,n,["Mortgage-backed securities"]);return{treasury:d(e,r,l),mbs:d(e,a,l)}}(m,T),S=function(e,l){let t=s(e,["Factors Affecting Reserve Balances"]),n=s(e,["Memorandum Items","1A"]),r=null,a=null,o=null,c=null,f=null;if(t&&t.length>0){let n=u(e,t);if(n&&n.length>0){let t=i(e,n,["Week ended","Level"]);r=y(n,e,["Loans - Primary credit"],t,l),a=y(n,e,["Loans - Bank Term Funding Program"],t,l),o=y(n,e,["Loans"],t,l)}}if(n&&n.length>0){let t=u(e,n);if(t&&t.length>0){let n=i(e,t,["Week ended","Level"]);c=y(t,e,["Securities lent to dealers - Overnight facility"],n,l),f=y(t,e,["Securities lent to dealers - Term facility"],n,l)}}return{loans:{primaryCredit:r,btfp:a,total:o},securitiesLending:{overnight:c,term:f}}}(m,T),K=function(e,l){let t=s(e,["Consolidated Statement of Condition","Table 5"]);if(!t||0===t.length)return l.push("Statement section not found"),w();let n=u(e,t);if(!n||0===n.length)return l.push("Statement table not found"),w();let r=i(e,n,["Assets","Level"]),a=i(e,n,["Liabilities","Level"]);return{assets:{gold:y(n,e,["Gold stock"],r,l),sdr:y(n,e,["Coin"],r,l),securities:y(n,e,["Securities held outright"],r,l),repos:y(n,e,["Repurchase agreements"],r,l),loans:y(n,e,["Loans"],r,l),swaps:y(n,e,["Central bank liquidity swaps"],r,l),total:y(n,e,["Total assets"],r,l)},liabilities:{currency:y(n,e,["Currency in circulation"],a,l),reverseRepos:y(n,e,["Reverse repurchase agreements"],a,l),deposits:y(n,e,["Deposits with F.R. Banks, other than reserve balances"],a,l),reserveBalances:y(n,e,["Reserve balances with Federal Reserve Banks"],a,l),tga:y(n,e,["U.S. Treasury, General Account","Treasury General Account"],a,l),total:y(n,e,["Total liabilities"],a,l)}}}(m,T);return{ok:!0,date:e,releaseDate:k,weekEnded:A,sections:{overview:x,factors:R,summary:C,maturity:L,lending:S,statement:K},warnings:T}}catch(l){return{ok:!1,date:e,releaseDate:"",weekEnded:"",sections:{overview:g(),factors:p(),summary:{supplyingTop:[],absorbingTop:[]},maturity:b(),lending:{loans:{primaryCredit:null,btfp:null,total:null},securitiesLending:{overnight:null,term:null}},statement:w()},warnings:[l instanceof Error?l.message:String(l)]}}}function d(e,l,t){if(!l||0===l.length)return v();let n=l.find("td, th"),a=i(e,l.closest("table"),["within 15 days","15 days"]),s=i(e,l.closest("table"),["16-90 days","16 to 90"]),u=i(e,l.closest("table"),["91 days to 1 year","91-365"]),o=i(e,l.closest("table"),["1-5 years","1 to 5"]),c=i(e,l.closest("table"),["5-10 years","5 to 10"]),f=i(e,l.closest("table"),["10 years and over","10+"]),h=i(e,l.closest("table"),["Total"]);return{within15Days:a>=0?r(e(n[a]).text()):null,days16to90:s>=0?r(e(n[s]).text()):null,days91to1Year:u>=0?r(e(n[u]).text()):null,years1to5:o>=0?r(e(n[o]).text()):null,years5to10:c>=0?r(e(n[c]).text()):null,years10AndOver:f>=0?r(e(n[f]).text()):null,total:h>=0?r(e(n[h]).text()):null}}function y(e,l,t,n,a){if(n<0)return null;let s=o(l,e,function(e){let l=new Set;for(let t of e){l.add(t);let e=t.replace(/,/g,"");e!==t&&l.add(e);let n=t.replace(/[()]/g,"");n!==t&&l.add(n);let r=t.replace(/\s+/g," ");r!==t&&l.add(r);let a=t.replace(/[,()]/g,"").replace(/\s+/g," ");a!==t&&l.add(a)}return Array.from(l)}(t));if(!s||0===s.length)return a.push(`Row not found for labels: ${t.join(", ")}`),null;let u=s.find("td, th");if(u.length<=n)return a.push(`Column index ${n} out of range for row: ${t[0]}`),null;let i=l(u[n]).text().trim(),c=r(i);return null===c&&i&&a.push(`Failed to parse number from "${i}" for ${t[0]}`),c}function g(){return{totalAssets:null,securities:null,reserveBalances:null,tga:null,reverseRepos:null,currency:null,totalAssetsWeekly:null,totalAssetsYearly:null,securitiesWeekly:null,securitiesYearly:null,reserveBalancesWeekly:null,reserveBalancesYearly:null,tgaWeekly:null,tgaYearly:null,reverseReposWeekly:null,reverseReposYearly:null,currencyWeekly:null,currencyYearly:null,totalAssetsForComposition:null,treasurySecurities:null,mortgageBackedSecurities:null,otherAssets:null}}function p(){return{supplying:[],absorbing:[],totals:{totalSupplying:{value:null,weekly:null,yearly:null},totalAbsorbing:{value:null,weekly:null,yearly:null},reserveBalances:{value:null,weekly:null,yearly:null}}}}function b(){return{treasury:v(),mbs:v()}}function v(){return{within15Days:null,days16to90:null,days91to1Year:null,years1to5:null,years5to10:null,years10AndOver:null,total:null}}function w(){return{assets:{gold:null,sdr:null,securities:null,repos:null,loans:null,swaps:null,total:null},liabilities:{currency:null,reverseRepos:null,deposits:null,reserveBalances:null,tga:null,total:null}}}async function m(e,l){let t=f(e),n=`https://www.federalreserve.gov/releases/h41/${t}/`,r=await fetch(n,{headers:{"User-Agent":"Mozilla/5.0 (compatible; fedreportsh/1.0; +https://fedreportsh.vercel.app)",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9","Cache-Control":"no-cache",Pragma:"no-cache"},cache:"no-store",redirect:"follow"});404===r.status&&(n=`https://www.federalreserve.gov/releases/h41/${t}/default.htm`,r=await fetch(n,{headers:{"User-Agent":"Mozilla/5.0 (compatible; fedreportsh/1.0; +https://fedreportsh.vercel.app)",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9","Cache-Control":"no-cache",Pragma:"no-cache"},cache:"no-store",redirect:"follow"}));let a=r.headers.get("content-type")||"unknown",s=await r.text(),u=s.replace(/\s+/g," ").substring(0,500),o=["Access Denied","robot","captcha","Request Rejected","Forbidden"].some(e=>s.toLowerCase().includes(e.toLowerCase()));if(console.warn(`[fetchH41Report] Fetch result for ${t}:`,{url:n,status:r.status,statusText:r.statusText,contentType:a,htmlLength:s.length,htmlPreview:u,flagged:o}),!r.ok)throw Error(`Failed to fetch H.4.1 HTML: ${r.status} ${r.statusText}`);return o&&console.warn(`[fetchH41Report] WARNING: Blocked keywords detected in HTML for ${t}`),{html:s,url:n}}async function k(){let e=await fetch("https://www.federalreserve.gov/releases/h41/",{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"},cache:"no-store"});if(!e.ok)throw Error(`Failed to fetch H.4.1 main page: ${e.status}`);let l=await e.text(),t=n.zD(l),r=[];t('a[href*="/releases/h41/"]').each((e,l)=>{let n=(t(l).attr("href")||"").match(/\/releases\/h41\/(\d{8})\//);if(n){let e=n[1],l=`${e.slice(0,4)}-${e.slice(4,6)}-${e.slice(6,8)}`;r.push(l)}});let a=Array.from(new Set(r)).sort().reverse();if(0===a.length)throw Error("No release dates found");return a}}};