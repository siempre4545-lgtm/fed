"use strict";exports.id=896,exports.ids=[896],exports.modules={2896:(e,l,t)=>{t.d(l,{v9:()=>m,AU:()=>k,lm:()=>h});var r=t(3751);function n(e){if(!e)return null;let l=e.replace(/\u00a0/g," ").trim();if(!l||!/\d/.test(l))return null;let t=l.match(/^([+-])?\s*([\d,]+(?:\.[\d]+)?)/);if(!t)return null;let r="-"===t[1]?-1:1,n=Number(t[2].replace(/,/g,""));return Number.isFinite(n)?r*n:null}function a(e){return e.replace(/\u00a0/g," ").replace(/[()]/g," ").replace(/\./g," ").replace(/&/g,"and").replace(/,/g," ").replace(/\d+$/g,"").replace(/\s+/g," ").toLowerCase().trim()}function s(e,l){let t=e("body"),r=t.text();for(let n of l){if(!r.includes(n))continue;let l=null;if(e('h1, h2, h3, h4, h5, h6, p, strong, b, div[class*="title"], div[class*="header"]').each((t,r)=>{if(e(r).text().includes(n))return l=r,!1}),!l){let r=t.find("*");for(let t=0;t<r.length;t++){let a=r[t];e(a).text().includes(n)&&(!l||e(a).children().length<e(l).children().length)&&(l=a)}}if(l){let r=e(l).closest("table");if(0===r.length&&(r=e(l).closest("div, section, article, main")),0===r.length&&(r=e(l).parent()),r.length>0&&r[0]!==t[0])return r;return e(l)}}return null}function u(e,l,t){if(0===l.length)return null;if("table"===l.prop("tagName")?.toLowerCase())return l;let r=l.find("table").first();if(r.length>0)return r;let n=l.nextAll(),a=0;for(let e=0;e<n.length&&a<30;e++){let l=n.eq(e);a++;let t=l.prop("tagName")?.toLowerCase();if(t&&["h1","h2","h3","h4","h5","h6"].includes(t)){let e=l.text().trim();e.length>0&&e.match(/table|factors|statement|condition|maturity|loans/i)}if("table"===t)return l;let r=l.find("table").first();if(r.length>0)return r}let s=l.parent();if(s.length>0){let e=s.find("table").first();if(e.length>0)return e;let l=s.nextAll();for(let e=0;e<l.length&&e<15;e++){let t=l.eq(e),r=t.find("table").first();if(r.length>0)return r;if(t.prop("tagName")?.toLowerCase()==="table")return t}}let u=l.prevAll();a=0;for(let e=0;e<u.length&&a<30;e++){let l=u.eq(e);a++;let t=l.find("table").first();if(t.length>0)return t;if("table"===l.prop("tagName")?.toLowerCase())return l}let o=e("body").find("table"),i=[];i=t&&t.length>0?t.map(e=>e.toLowerCase()):l.text().split(/\s+/).filter(e=>e.length>3).slice(0,5).map(e=>e.toLowerCase());for(let e=0;e<o.length;e++){let l=o.eq(e),t=l.text().toLowerCase();if(i.some(e=>t.includes(e))||t.includes("factors affecting")||t.includes("reserve balances"))return l}return null}function o(e,l,t){let r=l.find("tr");for(let l=0;l<r.length;l++){let n=r[l];if(function(e,l){let t=a(e);for(let e of l){let l=a(e);if(t===l)return e;let r=l.split(/\s+/).filter(e=>e.length>2);if(r.length>0&&r.every(e=>t.includes(e)))return e}return null}(e(n).find("td, th").first().text().trim(),t))return e(n)}return null}function i(e,l,t){let r=l.find("tr").slice(0,3);for(let l=0;l<r.length;l++){let n=e(r[l]).find("td, th");for(let l=0;l<n.length;l++){let r=a(e(n[l]).text().trim());for(let e of t){let t=a(e);if(r.includes(t))return l}}}return -1}function c(e){if(!e)return null;let l=e.match(/([A-Z][a-z]{2,})\s+(\d{1,2}),\s+(\d{4})/);if(!l)return null;let t={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"}[l[1]];if(!t)return null;let r=String(l[2]).padStart(2,"0"),n=l[3];return`${n}-${t}-${r}`}function f(e){return e.replace(/-/g,"")}async function h(e){let l=f(e);try{let t=`https://www.federalreserve.gov/releases/h41/${l}/`,n=await fetch(t,{headers:{"User-Agent":"Mozilla/5.0 (compatible; fedreportsh/1.0; +https://fedreportsh.vercel.app)",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9","Cache-Control":"no-cache",Pragma:"no-cache"},cache:"no-store",redirect:"follow"});404===n.status&&(t=`https://www.federalreserve.gov/releases/h41/${l}/default.htm`,n=await fetch(t,{headers:{"User-Agent":"Mozilla/5.0 (compatible; fedreportsh/1.0; +https://fedreportsh.vercel.app)",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9","Cache-Control":"no-cache",Pragma:"no-cache"},cache:"no-store",redirect:"follow"}));let a=n.headers.get("content-type")||"unknown",f=await n.text(),h=f.replace(/\s+/g," ").substring(0,500),v=["Access Denied","robot","captcha","Request Rejected","Forbidden"].some(e=>f.toLowerCase().includes(e.toLowerCase()));if(console.warn(`[parseH41HTML] Fetch result for ${l}:`,{url:t,status:n.status,statusText:n.statusText,contentType:a,htmlLength:f.length,htmlPreview:h,flagged:v}),!n.ok)throw Error(`Failed to fetch H.4.1 HTML: ${n.status} ${n.statusText}`);v&&console.warn(`[parseH41HTML] WARNING: Blocked keywords detected in HTML for ${l}`);let m=r.zD(f),k=function(e){let l=e("body").text().match(/Release\s+Date[:\s]+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);if(l){let e=c(l[1]);if(e)return e}return""}(m),A=function(e){let l=e("body").text().match(/Week\s+ended[:\s]+([A-Z][a-z]{2,}\s+\d{1,2},\s+\d{4})/i);if(l){let e=c(l[1]);if(e)return e}return""}(m),T=[],x=function(e,l){let t=s(e,["Factors Affecting Reserve Balances","Table 1","Factors affecting reserve balances"]);if(!t||0===t.length)return g();let r=u(e,t,["Factors Affecting Reserve Balances","Table 1"]);if(!r||0===r.length)return g();let n=i(e,r,["Week ended","Level"]),a=i(e,r,["Change from previous week","Change from week ended"]),o=i(e,r,["Change from year ago","Change from:"]),c=y(r,e,["Total factors supplying reserve funds"],n,l),f=y(r,e,["Securities held outright"],n,l),h=y(r,e,["Reserve balances with Federal Reserve Banks"],n,l),d=y(r,e,["U.S. Treasury, General Account","Treasury General Account"],n,l),p=y(r,e,["Reverse repurchase agreements"],n,l),b=y(r,e,["Currency in circulation"],n,l),v=y(r,e,["Total factors supplying reserve funds"],a,l),w=y(r,e,["Total factors supplying reserve funds"],o,l),m=y(r,e,["Securities held outright"],a,l),k=y(r,e,["Securities held outright"],o,l),A=y(r,e,["Reserve balances with Federal Reserve Banks"],a,l),T=y(r,e,["Reserve balances with Federal Reserve Banks"],o,l),x=y(r,e,["U.S. Treasury, General Account","Treasury General Account"],a,l),C=y(r,e,["U.S. Treasury, General Account","Treasury General Account"],o,l),R=y(r,e,["Reverse repurchase agreements"],a,l),L=y(r,e,["Reverse repurchase agreements"],o,l),S=y(r,e,["Currency in circulation"],a,l),K=y(r,e,["Currency in circulation"],o,l),B=s(e,["Consolidated Statement of Condition","Table 5"]),F=null,$=null,M=null,q=null;if(B&&B.length>0){let t=u(e,B,["Consolidated Statement","Assets","Liabilities"]);if(t&&t.length>0){let r=i(e,t,["Assets","Level"]);F=y(t,e,["Total assets"],r,l),$=y(t,e,["U.S. Treasury securities"],r,l),M=y(t,e,["Mortgage-backed securities"],r,l),q=y(t,e,["Other assets"],r,l)}}return{totalAssets:c,securities:f,reserveBalances:h,tga:d,reverseRepos:p,currency:b,totalAssetsWeekly:v,totalAssetsYearly:w,securitiesWeekly:m,securitiesYearly:k,reserveBalancesWeekly:A,reserveBalancesYearly:T,tgaWeekly:x,tgaYearly:C,reverseReposWeekly:R,reverseReposYearly:L,currencyWeekly:S,currencyYearly:K,totalAssetsForComposition:F,treasurySecurities:$,mortgageBackedSecurities:M,otherAssets:q}}(m,T),C=function(e,l){let t=s(e,["Factors Affecting Reserve Balances","Table 1","Factors affecting reserve balances"]);if(!t||0===t.length)return p();let r=u(e,t,["Factors Affecting Reserve Balances","Table 1"]);if(!r||0===r.length)return p();let n=i(e,r,["Week ended","Level"]),a=i(e,r,["Change from previous week","Change from week ended"]),o=i(e,r,["Change from year ago","Change from:"]),c=[{label:"Reserve Bank credit",labelKo:"연준 신용",value:null,weekly:null,yearly:null},{label:"Securities held outright",labelKo:"보유 증권",value:null,weekly:null,yearly:null},{label:"U.S. Treasury securities",labelKo:"미 국채",value:null,weekly:null,yearly:null},{label:"Bills",labelKo:"단기채",value:null,weekly:null,yearly:null},{label:"Notes and bonds, nominal",labelKo:"중장기채",value:null,weekly:null,yearly:null},{label:"Notes and bonds, inflation-indexed",labelKo:"물가연동채",value:null,weekly:null,yearly:null},{label:"Mortgage-backed securities",labelKo:"주택저당증권",value:null,weekly:null,yearly:null},{label:"Repurchase agreements",labelKo:"레포",value:null,weekly:null,yearly:null},{label:"Loans",labelKo:"대출",value:null,weekly:null,yearly:null},{label:"Loans - Bank Term Funding Program",labelKo:"은행기간대출",value:null,weekly:null,yearly:null},{label:"Central bank liquidity swaps",labelKo:"통화스왑",value:null,weekly:null,yearly:null},{label:"Gold stock",labelKo:"금",value:null,weekly:null,yearly:null},{label:"Coin",labelKo:"SDR 증서",value:null,weekly:null,yearly:null}];for(let t of c)t.value=y(r,e,[t.label],n,l),t.weekly=y(r,e,[t.label],a,l),t.yearly=y(r,e,[t.label],o,l);let f=[{label:"Currency in circulation",labelKo:"유통 통화",value:null,weekly:null,yearly:null},{label:"Reverse repurchase agreements",labelKo:"역레포",value:null,weekly:null,yearly:null},{label:"Deposits with F.R. Banks, other than reserve balances",labelKo:"연준 예치금",value:null,weekly:null,yearly:null},{label:"U.S. Treasury, General Account",labelKo:"재무부 일반계정",value:null,weekly:null,yearly:null}];for(let t of f)t.value=y(r,e,[t.label],n,l),t.weekly=y(r,e,[t.label],a,l),t.yearly=y(r,e,[t.label],o,l);let h={value:y(r,e,["Total factors supplying reserve funds"],n,l),weekly:y(r,e,["Total factors supplying reserve funds"],a,l),yearly:y(r,e,["Total factors supplying reserve funds"],o,l)},d={value:y(r,e,["Total factors, other than reserve balances, absorbing reserve funds"],n,l),weekly:y(r,e,["Total factors, other than reserve balances, absorbing reserve funds"],a,l),yearly:y(r,e,["Total factors, other than reserve balances, absorbing reserve funds"],o,l)},g={value:y(r,e,["Reserve balances with Federal Reserve Banks"],n,l),weekly:y(r,e,["Reserve balances with Federal Reserve Banks"],a,l),yearly:y(r,e,["Reserve balances with Federal Reserve Banks"],o,l)};return 13!==c.length&&l.push(`Supplying items count mismatch: expected 13, got ${c.length}`),4!==f.length&&l.push(`Absorbing items count mismatch: expected 4, got ${f.length}`),{supplying:c,absorbing:f,totals:{totalSupplying:h,totalAbsorbing:d,reserveBalances:g}}}(m,T),R={supplyingTop:[C.supplying.find(e=>"보유 증권"===e.labelKo)||{label:"",labelKo:"보유 증권",value:null,weekly:null,yearly:null},C.supplying.find(e=>"레포"===e.labelKo)||{label:"",labelKo:"레포",value:null,weekly:null,yearly:null},C.supplying.find(e=>"대출"===e.labelKo)||{label:"",labelKo:"대출",value:null,weekly:null,yearly:null},C.supplying.find(e=>"통화스왑"===e.labelKo)||{label:"",labelKo:"통화스왑",value:null,weekly:null,yearly:null}].filter(e=>null!==e.value),absorbingTop:[C.absorbing.find(e=>"유통 통화"===e.labelKo)||{label:"",labelKo:"유통 통화",value:null,weekly:null,yearly:null},C.absorbing.find(e=>"역레포"===e.labelKo)||{label:"",labelKo:"역레포",value:null,weekly:null,yearly:null},C.absorbing.find(e=>"재무부 일반계정"===e.labelKo)||{label:"",labelKo:"재무부 일반계정",value:null,weekly:null,yearly:null},{label:"Reserve balances with Federal Reserve Banks",labelKo:"지급준비금",...C.totals.reserveBalances}].filter(e=>null!==e.value)},L=function(e,l){let t=s(e,["Maturity Distribution of Securities","Table 2"]);if(!t||0===t.length)return l.push("Maturity section not found"),b();let r=u(e,t,["Maturity","Treasury","Mortgage"]);if(!r||0===r.length)return b();let n=o(e,r,["U.S. Treasury securities"]),a=o(e,r,["Mortgage-backed securities"]);return{treasury:d(e,n,l),mbs:d(e,a,l)}}(m,T),S=function(e,l){let t=s(e,["Factors Affecting Reserve Balances"]),r=s(e,["Memorandum Items","1A"]),n=null,a=null,o=null,c=null,f=null;if(t&&t.length>0){let r=u(e,t,["Loans","Primary credit","BTFP"]);if(r&&r.length>0){let t=i(e,r,["Week ended","Level"]);n=y(r,e,["Loans - Primary credit"],t,l),a=y(r,e,["Loans - Bank Term Funding Program"],t,l),o=y(r,e,["Loans"],t,l)}}if(r&&r.length>0){let t=u(e,r,["Securities lent","Overnight","Term"]);if(t&&t.length>0){let r=i(e,t,["Week ended","Level"]);c=y(t,e,["Securities lent to dealers - Overnight facility"],r,l),f=y(t,e,["Securities lent to dealers - Term facility"],r,l)}}return{loans:{primaryCredit:n,btfp:a,total:o},securitiesLending:{overnight:c,term:f}}}(m,T),K=function(e,l){let t=s(e,["Consolidated Statement of Condition","Table 5"]);if(!t||0===t.length)return l.push("Statement section not found"),w();let r=u(e,t,["Consolidated Statement","Statement of Condition"]);if(!r||0===r.length)return w();let n=i(e,r,["Assets","Level"]),a=i(e,r,["Liabilities","Level"]);return{assets:{gold:y(r,e,["Gold stock"],n,l),sdr:y(r,e,["Coin"],n,l),securities:y(r,e,["Securities held outright"],n,l),repos:y(r,e,["Repurchase agreements"],n,l),loans:y(r,e,["Loans"],n,l),swaps:y(r,e,["Central bank liquidity swaps"],n,l),total:y(r,e,["Total assets"],n,l)},liabilities:{currency:y(r,e,["Currency in circulation"],a,l),reverseRepos:y(r,e,["Reverse repurchase agreements"],a,l),deposits:y(r,e,["Deposits with F.R. Banks, other than reserve balances"],a,l),reserveBalances:y(r,e,["Reserve balances with Federal Reserve Banks"],a,l),tga:y(r,e,["U.S. Treasury, General Account","Treasury General Account"],a,l),total:y(r,e,["Total liabilities"],a,l)}}}(m,T);return{ok:!0,date:e,releaseDate:k,weekEnded:A,sections:{overview:x,factors:C,summary:R,maturity:L,lending:S,statement:K},warnings:T}}catch(l){return{ok:!1,date:e,releaseDate:"",weekEnded:"",sections:{overview:g(),factors:p(),summary:{supplyingTop:[],absorbingTop:[]},maturity:b(),lending:{loans:{primaryCredit:null,btfp:null,total:null},securitiesLending:{overnight:null,term:null}},statement:w()},warnings:[l instanceof Error?l.message:String(l)]}}}function d(e,l,t){if(!l||0===l.length)return v();let r=l.find("td, th"),a=i(e,l.closest("table"),["within 15 days","15 days"]),s=i(e,l.closest("table"),["16-90 days","16 to 90"]),u=i(e,l.closest("table"),["91 days to 1 year","91-365"]),o=i(e,l.closest("table"),["1-5 years","1 to 5"]),c=i(e,l.closest("table"),["5-10 years","5 to 10"]),f=i(e,l.closest("table"),["10 years and over","10+"]),h=i(e,l.closest("table"),["Total"]);return{within15Days:a>=0?n(e(r[a]).text()):null,days16to90:s>=0?n(e(r[s]).text()):null,days91to1Year:u>=0?n(e(r[u]).text()):null,years1to5:o>=0?n(e(r[o]).text()):null,years5to10:c>=0?n(e(r[c]).text()):null,years10AndOver:f>=0?n(e(r[f]).text()):null,total:h>=0?n(e(r[h]).text()):null}}function y(e,l,t,r,a){if(r<0)return null;let s=o(l,e,function(e){let l=new Set;for(let t of e){l.add(t);let e=t.replace(/,/g,"");e!==t&&l.add(e);let r=t.replace(/[()]/g,"");r!==t&&l.add(r);let n=t.replace(/\s+/g," ");n!==t&&l.add(n);let a=t.replace(/[,()]/g,"").replace(/\s+/g," ");a!==t&&l.add(a)}return Array.from(l)}(t));if(!s||0===s.length)return null;let u=s.find("td, th");return u.length<=r?null:n(l(u[r]).text().trim())}function g(){return{totalAssets:null,securities:null,reserveBalances:null,tga:null,reverseRepos:null,currency:null,totalAssetsWeekly:null,totalAssetsYearly:null,securitiesWeekly:null,securitiesYearly:null,reserveBalancesWeekly:null,reserveBalancesYearly:null,tgaWeekly:null,tgaYearly:null,reverseReposWeekly:null,reverseReposYearly:null,currencyWeekly:null,currencyYearly:null,totalAssetsForComposition:null,treasurySecurities:null,mortgageBackedSecurities:null,otherAssets:null}}function p(){return{supplying:[],absorbing:[],totals:{totalSupplying:{value:null,weekly:null,yearly:null},totalAbsorbing:{value:null,weekly:null,yearly:null},reserveBalances:{value:null,weekly:null,yearly:null}}}}function b(){return{treasury:v(),mbs:v()}}function v(){return{within15Days:null,days16to90:null,days91to1Year:null,years1to5:null,years5to10:null,years10AndOver:null,total:null}}function w(){return{assets:{gold:null,sdr:null,securities:null,repos:null,loans:null,swaps:null,total:null},liabilities:{currency:null,reverseRepos:null,deposits:null,reserveBalances:null,tga:null,total:null}}}async function m(e,l){let t=f(e),r=`https://www.federalreserve.gov/releases/h41/${t}/`,n=await fetch(r,{headers:{"User-Agent":"Mozilla/5.0 (compatible; fedreportsh/1.0; +https://fedreportsh.vercel.app)",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9","Cache-Control":"no-cache",Pragma:"no-cache"},cache:"no-store",redirect:"follow"});404===n.status&&(r=`https://www.federalreserve.gov/releases/h41/${t}/default.htm`,n=await fetch(r,{headers:{"User-Agent":"Mozilla/5.0 (compatible; fedreportsh/1.0; +https://fedreportsh.vercel.app)",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9","Cache-Control":"no-cache",Pragma:"no-cache"},cache:"no-store",redirect:"follow"}));let a=n.headers.get("content-type")||"unknown",s=await n.text(),u=s.replace(/\s+/g," ").substring(0,500),o=["Access Denied","robot","captcha","Request Rejected","Forbidden"].some(e=>s.toLowerCase().includes(e.toLowerCase()));if(console.warn(`[fetchH41Report] Fetch result for ${t}:`,{url:r,status:n.status,statusText:n.statusText,contentType:a,htmlLength:s.length,htmlPreview:u,flagged:o}),!n.ok)throw Error(`Failed to fetch H.4.1 HTML: ${n.status} ${n.statusText}`);return o&&console.warn(`[fetchH41Report] WARNING: Blocked keywords detected in HTML for ${t}`),{html:s,url:r}}async function k(){let e=await fetch("https://www.federalreserve.gov/releases/h41/",{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"},cache:"no-store"});if(!e.ok)throw Error(`Failed to fetch H.4.1 main page: ${e.status}`);let l=await e.text(),t=r.zD(l),n=[];t('a[href*="/releases/h41/"]').each((e,l)=>{let r=(t(l).attr("href")||"").match(/\/releases\/h41\/(\d{8})\//);if(r){let e=r[1],l=`${e.slice(0,4)}-${e.slice(4,6)}-${e.slice(6,8)}`;n.push(l)}});let a=Array.from(new Set(n)).sort().reverse();if(0===a.length)throw Error("No release dates found");return a}}};